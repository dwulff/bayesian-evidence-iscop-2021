---
title: "Evaluating Evidence and Making Decisions using Bayesian Statistics"
subtitle: "ISCoP Conference 2021"  
author: "Mattan S. Ben-Shachar"
date: '`r Sys.Date()`'
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: xaringan-themer.css
    # seal: false
    nature:
      ratio: '16:9'
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
knit: (
  function(inputFile, encoding, ...) { 
    rmarkdown::render( 
      input       = inputFile, 
      encoding    = encoding,
      output_file = "index", 
      ...) })
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
#' use bayesplot, ggdist
```

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_duo_accent(
  # primary_color = "#1381B0",
  # secondary_color = "#FF961C",
  # inverse_header_color = "#FFFFFF"
)
```


Link to this presentation and materials on some GitHub repo.
This presentation is the "html page" for that repo.

https://mattansb.github.io/bayesian-evidence-iscop-2021

https://github.com/mattansb/bayesian-evidence-iscop-2021

---
class: inverse, center, middle

# What Is Bayes

---

Steal from new Gelman paper...

https://doi.org/10.1038/s43586-020-00001-2

- Prior
- likelihood
- Posterior (is not sampling distribution)
  - We usually can only estimate the posterior distibution by sampling from it.

--

Impact of priors:
Figure 2 from 

We are talking about updating.

---
class: center, middle

## Why Bayes

---

## Why Bayes

- Complex models - use priors to restrict parameter search
- Talk about probabilities...


---
class: inverse, center, middle

# Making Decisions using Bayesian Statistics

---

Here we are limit our discussion to univariate parameters (slopes, variances) or estimates (contrasts, expected values).

We can also talk about multivariate desicion making, by comparing different models. See loo, BF, etc.

---

## Working example

Some Stroop or something?

- Working in `R`
- We can use `rstanarm` (conviniant) or `brms` (more flexable).
- We will use `bayestestR`

---

```{r, eval = FALSE}
library(brms)
m <- brm(
  mpg ~ am, #<<
  data = mtcars, #<<
  prior = 
    # Prior for the intercept
    set_prior("student_t(3, 19.2, 5.4)", 
              class = "Intercept") +
    # Prior for the "effect" of am
    set_prior("student_t(3, 0, 3.5)", 
              class = "b",
              coef = "factoram1")
)
```

The model. 

---

```{r, eval = FALSE}
library(brms)
m <- brm(
  mpg ~ am,
  data = mtcars,
  prior = #<<
    # Prior for the intercept #<<
    set_prior("student_t(3, 19.2, 5.4)", #<<
              class = "Intercept") +#<<
    # Prior for the "effect" of am #<<
    set_prior("student_t(3, 0, 3.5)", #<<
              class = "b",#<<
              coef = "factoram1")#<<
)
```

Set some priors.

--

Notes:
  - By default, `brms` sets flat (*diffused, extremely uninformative*) priors for fixed effects. These are okay if you truly have no priors (but this also means you can compute *BF*s).
  - You can also set a prior of `sigma` in a linear model, and many others. See more options with `brms::get_prior()`.

---
class: center, middle

## Posterior Based Measures

---


## Posterior Based Measures

- pd
- p-map
- p-rope

---

### *p*-Direction

The probability of direction is the closest to the frequentist *p*-value....


---

### *p*-MAP

Is closest to the maxmium likelihood bases tests, but instead of the likelihood, it uses the posterior... Also very close...

---

### *p*-ROPE

The first truly Bayesian index..




---

.pull-left[
what is
]


.pull-right[
demo value + plot

```{r}
# demo value + plot
 
```

]


---
class: center, middle

## Likelihood Based Measures

---

## Likelihood Based Measures

- The Null-Interval Bayes Factor
- The Point-Null Bayes Factor
- Other Bayes Factors
  - Bayes factor for dividing hypotheses (link)
  - Restricted Model Bayes factors (link)

.footnote[
Some footnote
]


Overly diffuse priors should also be avoided, as they result in a Bayes factor that favours H0 regardless of the information in the data104.

---

### More reading

Kruschke, J. (2014). Doing bayesian data analysis: A tutorial with r, jags, and stan. Academic Press.



---

# Thanks!

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).

.pull-left[
- bgu + lab logo  
- mattansb
]


.pull-right[
easystats logo?

dom + daniel
]


more thanks blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
